@startuml TrainingDataModel_Full
' Full database diagram for TrainingDataModel

entity "AdminUser" as AdminUser {
  *Id : int
  UserId : int
  CreatedAt : DateTime
  IsActive : bool
}

entity "BillingInvoice" as BillingInvoice {
  *Id : int
  Amount : decimal
  Date : DateTime
  CustomerId : int
  Status : string
  PaidDate : DateTime
}

entity "Customer" as Customer {
  *Id : int
  Name : string
  Email : string
  Address : string
  Phone : string
}

entity "DailyUsageStatistic" as DailyUsageStatistic {
  *Id : int
  Date : DateTime
  Usage : decimal
  UserId : int
  ModuleId : int
}

entity "Module" as Module {
  *Id : int
  Name : string
  Description : string
  isCPP : bool
  isPython : bool
  isJava : bool
  isoffice : bool
  *VirtualMachineId : int
  *ModuleId : int
  *CustomerVMProcessId : int
}

entity "RdpFile" as RdpFile {
  *Id : int
  Path : string
  UserId : int
  CreatedAt : DateTime
}

entity "Student" as Student {
  *Id : int
  UserId : int
  EnrollmentDate : DateTime
}

entity "Trainer" as Trainer {
  *Id : int
  UserId : int
  HireDate : DateTime
}

entity "TrainerTrainingCourse" as TrainerTrainingCourse {
  *TrainerId : int
  *TrainingCourseId : int
}

entity "TrainingCourse" as TrainingCourse {
  *Id : int
  Title : string
  Description : string
  StartDate : DateTime
  EndDate : DateTime
  *ModuleId : int
  
}

entity "StudentTrainingCourse" as StudentTrainingCourse {
  *StudentId : int
  *TrainingCourseId : int
  EnrollmentDate : DateTime
}

entity "User" as User {
  *Id : int
  Name : string
  Email : string
  Role : string
  CreatedAt : DateTime
}

entity "VirtualMachine" as VirtualMachine {
  *Id : int
  Name : string
  VmTypeId : int
  VmOptionId : int
  OwnerUserId : int
  CreatedAt : DateTime
}

entity "CustomerVMProcess" as CustomerVMProcess {
  *Id : int
  Name : string
  CreatedAt : DateTime
  PreferedStartTime : Time
  PreferedEndTime : Time
  PreferedDailyHourUsage : int
  CreatedAt : DateTime
}


entity "VirtualMachineModel" as VirtualMachineModel {
  *Id : int
  Name : string
  CreatedAt : DateTime
  isOffice2021 : bool
  isTerraformInstalled : bool
  isPhotoshopInstalled : bool
}

entity "VmOption" as VmOption {
  *Id : int
  OptionName : string
  Description : string
}

entity "VmType" as VmType {
  *Id : int
  TypeName : string
  Description : string
}

'"Relationships"
Customer --{ BillingInvoice : "1 to many"
Customer --{ AdminUser : "1 to many"
Customer --{ User : "1 to many (if users are customers)"
User --{ DailyUsageStatistic : "1 to many"
User --{ RdpFile : "1 to many"
User --{ VirtualMachine : "1 to many (Owner)"
User --{ AdminUser : "1 to many (User link)"
User --{ Student : "1 to many (User link)"
User --{ Trainer : "1 to many (User link)"
VirtualMachine -- VmType : "many to 1"
VirtualMachine -- VmOption : "many to 1"
Customer --- VirtualMachineModel : "1 to many"
Customer --- Module : "1 to many"
Customer --- CustomerVMProcess : "1 to many"
Student --{ StudentTrainingCourse : "1 to many"
TrainingCourse --{ StudentTrainingCourse : "1 to many"
StudentTrainingCourse }-- Student
StudentTrainingCourse }-- TrainingCourse
Trainer --{ TrainerTrainingCourse : "1 to many"
TrainingCourse --{ TrainerTrainingCourse : "1 to many"
TrainerTrainingCourse }-- Trainer
TrainerTrainingCourse }-- TrainingCourse
Module -- DailyUsageStatistic : "1 to many"
Module --{ TrainingCourse : "1 to many"
@enduml
